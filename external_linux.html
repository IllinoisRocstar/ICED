<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>ICED_Physics: Building ICED on Linux</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen_html_style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="iced_logo_small.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">ICED_Physics
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">ICED: llinois Rocstarâ€™s Integrated Computational Environment for Electrochemical Device Design (ICED)</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('external_linux.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Building <a class="el" href="namespaceICED.html">ICED</a> on Linux </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><b> <em><a class="el" href="namespaceICED.html">ICED</a></em>: An Integrated Computational System for Electrochemical Device Design and Simulation.</b></p>
<p><b></b> The base system with simple modules will be released cost-free to all government, industry, and academic users to generate interest in the system. Licensable modules based on advanced simulation techniques and target applications will be licensed to industrial users for a fee and to academic institutions for a reduced fee.</p>
<p>These instructions pertain to building <em><a class="el" href="namespaceICED.html">ICED</a></em> on the Linux platforms. As of now, it is unknown as to whether <em><a class="el" href="namespaceICED.html">ICED</a></em> will be available on a Windows-based machine. <br/>
 <em><a class="el" href="namespaceICED.html">ICED</a></em> has three third-party library requirements: <em>IMPACT, IRAD</em>, and <em>Trilinos</em>.</p>
<dl class="section note"><dt>Note</dt><dd>The instructions presented herein require a Linux terminal. As such the commands are fairly general and are not shell specific. For these reasons instructions that require setting paths are left deliberately vague. Users should set path variables using the form dictated by their shell environment. The general forms for bash and csh are given here for ease-of-use. Note the syntax; it is <b><em>very</em></b> important! Users can determine their current shell environment by using SHELL. <blockquote class="doxtable">
<p>echo $SHELL <br/>
/bin/bash: export USR_VAR="/path/to/user/location/" <br/>
../bin/csh: setenv USR_VAR /path/to/user/location</p>
<p></p>
</blockquote>
</dd></dl>
<h1><a class="anchor" id="install_prereqs"></a>
Installation Prerequisites</h1>
<ul>
<li>Install <em>gcc</em> and <em>gfortran</em> from <a href="http://hpc.sourceforge.net/">http://hpc.sourceforge.net/</a><ul>
<li>For RHEL/Fedora/CentOS Distributions <blockquote class="doxtable">
<p>sudo yum install gcc kernel-devel</p>
<p></p>
</blockquote>
</li>
<li>For Debian/Ubuntu Distributions <blockquote class="doxtable">
<p>sudo apt-get install gcc make linux-headers-$(uname -r)</p>
<p></p>
</blockquote>
</li>
</ul>
</li>
<li>Install latest <em>OpenMPI</em> from <a href="http://www.open-mpi.org/">http://www.open-mpi.org/</a> <blockquote class="doxtable">
<p>sudo yum install openmpi.x86_64</p>
<p></p>
</blockquote>
</li>
<li>Install <em>HDF4</em> <blockquote class="doxtable">
<p>sudo yum install hdf4 hdf4-devel</p>
<p></p>
</blockquote>
</li>
</ul>
<h1><a class="anchor" id="Dir_Prep"></a>
Directory preparation</h1>
<blockquote class="doxtable">
<p>mkdir ICED_suite <br/>
cd ICED_suite/ <br/>
mkdir TPLs <br/>
CC = "mpicc -fPIC" <br/>
 CXX = "mpicxx -fPIC" <br/>
 FC = "mpif90 -fPIC" <br/>
 </p>
</blockquote>
<h1><a class="anchor" id="IMPACT_ICED"></a>
Building IMPACT and IRAD</h1>
<p>Because the <b><em>IMPACT</em></b> and <b><em>IRAD</em></b> infrastructures are really just used as <em>support</em> libraries, the following build scenario is recommended. Note that these support libraries should be built <em>out-of-source</em> <b>but</b> installed <em>in the same place</em>. Note that <em>MPI</em> and <em>HDF4</em> are required.</p>
<blockquote class="doxtable">
<p>cd TPLs/ <br/>
git clone <a href="https://github.com/IllinoisRocstar/IMPACT">https://github.com/IllinoisRocstar/IMPACT</a> IMPACT <br/>
cd IMPACT <br/>
git clone <a href="https://github.com/IllinoisRocstar/IRAD">https://github.com/IllinoisRocstar/IRAD</a> IRAD <br/>
cd ../ <br/>
mkdir Build_TPLs Install_TPLs <br/>
cd Build_TPLs <br/>
mkdir IMPACT-IRAD <br/>
cd IMPACT-IRAD <br/>
cmake ../../IMPACT -DCMAKE_INSTALL_PREFIX=../../Install_TPLs <br/>
make <br/>
make test <br/>
make install <br/>
 </p>
</blockquote>
<h1><a class="anchor" id="build_trilinois"></a>
Building Trilinos</h1>
<p>The Trilinos Project from Sandia National Laboratory is an effort to develop algorithms and enabling technologies within an object-oriented software framework for the solution of large-scale, complex multi-physics engineering and scientific problems. A unique design feature of Trilinos is its focus on packages. More information on Trilinos can be found here: <a href="https://trilinos.org/">https://trilinos.org/</a>.</p>
<p>Because the <b><em>Trilinos</em></b> is another <em>support</em> library, the following build scenario is recommended. Note that the Trilinos support library should be built <em>out-of-source</em> <b>but</b> installed <em>in the same place</em> as the other support libraries. Trilinos is also available for download as a tarball, but we utilize Sandia's public git repository for simplicity. Note that use of the git version requires an additional argument to be passed to CMake when building from the Trilinos "public repository" version: <b>-DTrilinos_ASSERT_MISSING_PACKAGES=OFF</b>. For tarball of the current or other versions of <em>Trilinos</em>, please see their website: <a href="https://trilinos.org/download/">https://trilinos.org/download/</a>.</p>
<blockquote class="doxtable">
<p>cd ../../ <br/>
git clone <a href="https://github.com/live-clones/trilinos.git">https://github.com/live-clones/trilinos.git</a> Trilinos <br/>
cd Build_TPLs <br/>
mkdir Trilinos <br/>
cd Trilinos <br/>
cmake ../../Trilinos -DCMAKE_INSTALL_PREFIX=../../Install_TPLs \ <br/>
 -DCMAKE_CXX_FLAGS:STRING="-w" \ <br/>
 -DTrilinos_ASSERT_MISSING_PACKAGES=OFF \ <br/>
 -DTrilinos_ENABLE_CXX11=OFF \ <br/>
 -DBUILD_SHARED_LIBS:BOOL=ON \ <br/>
 -DTPL_ENABLE_MPI=ON \ <br/>
 -DCMAKE_BUILD_TYPE=Release \ <br/>
 -DTrilinos_ENABLE_Epetra:BOOL=ON \ <br/>
 -DTrilinos_ENABLE_Teuchos:BOOL=ON \ <br/>
 -DTrilinos_ENABLE_Thyra:BOOL=ON \ <br/>
 -DTrilinos_ENABLE_Rythmos:BOOL=ON \ <br/>
 -DTrilinos_ENABLE_NOX:BOOL=ON \ <br/>
 -DTrilinos_ENABLE_TESTS=ON \ <br/>
make <br/>
make install <br/>
 </p>
</blockquote>
<p>A script is provided in the configuration directory in the <em><a class="el" href="namespaceICED.html">ICED</a></em> source as an alternative to this rather convoluted command line input. It can be executed from the desired build directory as</p>
<blockquote class="doxtable">
<p>do-configure_Trilinos ../../Trilinos -DCMAKE_INSTALL_PREFIX=../../Install_TPLs</p>
<p></p>
</blockquote>
<p>This is a handy way to save a particular software configuration for future builds or refernece.</p>
<h1><a class="anchor" id="build_iced"></a>
Building ICED</h1>
<p><em><a class="el" href="namespaceICED.html">ICED</a></em> is a multiphysics, multiscale, multifidelity simulation suite for advanced battery modeling. Eventually the base <em><a class="el" href="namespaceICED.html">ICED</a></em> system wil be open-source and available on GitHub, but for now, we assume that a tarball is the main distribution strategy.</p>
<blockquote class="doxtable">
<p>cd ~/ICED_Suite <br/>
tar xvzf ICED-0.tgz <br/>
mkdir Build Install <br/>
cd Build <br/>
cmake ../ICED-0 -DCMAKE_PREFIX_PATH=/full/path/to/TPLs/Install_TPLs/ -DBUILD_DOCUMENTATION=ON -DCMAKE_INSTALL_PREFIX=../Install <br/>
make <br/>
make docs <br/>
make test <br/>
make install <br/>
 </p>
</blockquote>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Nov 23 2015 13:33:55 for ICED_Physics by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
